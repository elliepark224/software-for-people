<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Custom Link Preview Generator</title>
</head>
<body>
  <h1>Create a Custom Link Preview</h1>
  <form id="previewForm">
    <label for="imageURL">Image URL:</label>
    <input type="url" id="imageURL" name="imageURL" required><br><br>
    
    <label for="previewText">Preview Text:</label>
    <input type="text" id="previewText" name="previewText" required><br><br>
    
    <button type="button" onclick="generateLink()">Generate Link</button>
  </form>
  
  <p id="generatedLink"></p>
  
  <script>
    function generateLink() {
      const imageUrl = document.getElementById("imageURL").value;
      const previewText = document.getElementById("previewText").value;
      const link = `/generatePreview?image=${encodeURIComponent(imageUrl)}&text=${encodeURIComponent(previewText)}`;
      document.getElementById("generatedLink").innerHTML = `Your custom preview link: <a href="${link}" target="_blank">${link}</a>`;
    }

    const express = require('express');
const app = express();

app.get('/generatePreview', (req, res) => {
  const imageUrl = req.query.image;
  const previewText = req.query.text;

  // Serve the HTML with dynamic Open Graph tags
  res.send(`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <title>Custom Link Preview</title>
      <meta property="og:title" content="${previewText}" />
      <meta property="og:description" content="${previewText}" />
      <meta property="og:image" content="${imageUrl}" />
      <meta property="og:url" content="${req.protocol}://${req.get('host')}${req.originalUrl}" />
      <meta property="og:type" content="website" />
      <meta name="twitter:card" content="summary_large_image" />
    </head>
    <body>
      <h1>${previewText}</h1>
      <img src="${imageUrl}" alt="Preview Image" style="max-width:100%; height:auto;" />
    </body>
    </html>
  `);
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});
  </script>
</body>
</html>
